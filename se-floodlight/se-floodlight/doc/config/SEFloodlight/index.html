<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>SEFloodlight</title>
</head>
<body>
<h1>SEFloodlight</h1>
SEFloodlight is an enhanced version of the Floodlight OpenFlow controller that provides and enforces
privilege-based OpenFlow operations. It also implements SRI's OpenFlow Northbound API, which permits
external applications to be first-class OpenFlow applications, again subject to privilege-based
OpenFlow operations.

<h2>SEFloodlight Privileges</h2>
SEFloodlight privileges are defined by
<ul>
<li><i>Group and role access control lists</i>, and</li>
<li><i>Credential files</i>, for internal Java-based Floodlight modules</li>
</ul>
<i>Groups</i> define admissible OpenFlow operations, while
<i>roles</i>, which are bound to one or more groups, define maximum admissible numeric
<code>FLOW_MOD</code> priorities. (<i>Groups</i> are defined in
<code>runtime/config/SEGroup.json</code>, while <i>roles</i> are defined in
<code>runtime/config/SERole.json</code>.)<br>
<br>
N.b., SEFloodlight explicitly references roles with the names <code>"admin"</code> and
<code>"ofapp"</code>, and groups with the names <code>"ofapp"</code> and <code>"privileged"</code>.
Consequently, these entry names must <i>not</i> be changed in <code>runtime/config/SERole.json</code> and
<code>runtime/config/SEGroup.json</code>.

<h2>Internal Java-based Floodlight Modules</h2>

<h3>Unregistered Modules</h3>
By default, SEFloodlight prevents Floodlight modules from issuing
<code>PACKET_OUT</code> messages and restricts their <code>FLOW_MOD</code> priorities to a minimum
priority range (viz., they are assigned to the <code>ofapp</code> group, and any
<code>FLOW_MOD</code> message whose priority value exceeds the module&rsquo;s maximum range is
set to the range&rsquo;s end value).

<h3>Registered Modules</h3>
To register a Floodlight module, the module must
<ul>
<li>Implement <code>net.floodlightcontroller.security.IRegisterSEModule</code> and
invoke <code>org.openflow.util.ProducerConsumer.getSingleton ().registerConsumer (this)</code>;
</li>
<li>Use the supplied <code>BasicFactory</code> instance to create <code>OFMessage</code>s; and</li>
<li>After <code>.registerConsumer (this)</code> is called, optionally determine the
maximum <code>FLOW_MOD</code> priority by querying <code>FloodlightModuleContext</code>
for an <code>ISEFloodlightService</code> instance and invoking
<code><i>&lt;ISEFloodlightService&gt;</i>.endPriority (this)</code>.</li>
</ul>
<h4>Credential Files</h4>
Finally, Java-based registered Floodlight modules have external credential files that
are used at run-time to
<ol>
<li>Verify that memory resident Floodlight modules match their corresponding credential files, and</li>
<li>Assign group-based privileges to modules.</li>
</ol>
Credential files, which reside in <code>runtime/config/</code>, are created by executing<br>
<br>
<div style="margin-left: 20px;">
<code>
cd runtime/config/<br>
java -cp ../SEFloodlight.jar SECredentialGenerator &nbsp; &nbsp;\<br>
<div style="margin-left: 40px;">
    -group </code><i>&lt;group&gt;</i><code>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\<br>
    </code>[<code>-cp </code><i>&lt;class path for IRegisterSEModule, below&gt;</i>]<code>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\<br>
    </code><i>&lt;IRegisterSEModule&gt;</i><code>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\<br>
    -cred
</div>
</code>
</div><br>

where <i>&lt;group&gt;</i> corresponds to an entry in <code>runtime/config/SEGroup.json</code>; the generated
credential file is named &ldquo;<code><i>&lt;IRegisterSEModule&gt;</i>.cred</code>&rdquo;.  Note that these
files must be created and installed <i>before</i> SEFloodlight is started.<br>

<h4>IRegisterSEModule Example</h4>

<code>net.floodlightcontroller.linkdiscovery.internal.SELinkDiscoveryManager</code>
is an <code>net.floodlightcontroller.security.IRegisterSEModule</code> that is part of
SEFloodlight.  This subclass of an SRI Mediator-extended <code>net.floodlightcontroller.linkdiscovery.internal.LinkDiscoveryManager</code>
can be compiled via the <code>ant</code> script, <code>util/example/build.xml</code>.  This script also creates the class's
associated credential file.  (Note that <code>util/example/net/floodlightcontroller/linkdiscovery/internal/LinkDiscoveryManager.diff</code>
is the required SRI Mediator extension <code>patch</code> file to floodlight's standard implementation.)

<h2>OpenFlow Northbound API (NBAPI) Applications</h2>

<h3>Unregistered NBAPI Applications</h3>
Unregistered NBAPI applications have the same restrictions as unregistered internal modules,
with the addition that controller-as-proxy functions are also restricted (e.g., for the
<code>ControllerSupport</code> extension, the <code>SendARP</code> and <code>GetIPAddrInfo</code>
requests require <code>PACKET_OUT</code> privilege).

<h3>Registered NBAPI Applications</h3>
Registered NBAPI applications must provide a <i>client identifier</i> that corresponds
to an element in a group&rsquo;s <code>members</code> list (see <code>runtime/config/SEGroup.json</code>).
If the <i>client identifier</i> cannot be found, the application is assigned to the
<code>ofapp</code> group.  Finally, NBAPI applications may query for their associated
<code>FLOW_MOD</code> priority range by issuing a <code>ControllerSupport</code> extension
<code>PriorityRange</code> request.
</body>
</html>