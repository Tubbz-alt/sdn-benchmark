
			
				<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
				<html>
				<head>
				<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
				<title>Northbound API Secure Communications</title>
				</head>
				<body>
			
			<h1>Northbound API Secure Communications</h1>

<h2>Introduction</h2>

<p>The Northbound API server can be configured for no authentication (the
default, using plain sockets), server authentication, or mutual
authentication (using SSL).  This document briefly describes the steps
needed to create the certificate data and to configure both the server
and the (Java) client to use the certificates to secure the connection
between them.  When configured for mutual authentication the
SEFloodlight controller uses the client's authenticated SSL
certificate data to determine the client's role and capabilities.</p>

<h2>Certificate Generation</h2>

<p>Self-signed certificates will be used in the following examples to
secure the communications.  It is left as an exercise to the reader to
extend the certificates to ones signed by a certificate authority.
For the purposes of SSL communication, as long as the private keys
remain private, a self-signed certificate is as secure as one signed
by a certificate authority.  That said, when multiple clients are
anticipated, using a certificate authority to sign the client
certificates makes certificate management on the server side much
simpler (only need the CA's public key in the trust store).</p>

<p>Each end of an SSL connection must specify its identity certificate
data containing a public/private key pair and its trust certificate
data containing public keys.  The Java "keytool" command can be used
to generate and store the certificates.  The "openssl" command may
also be used, though it may take some effort to create the correct
style of stored certificate file.</p>

<p>To create a self-signed certificate pair using keytool (in csh syntax)
in "$jks<em>fn" and exporting the public certificate data to "$cert</em>fn"
perform the following (making appropriate substitutions):</p>

<pre><code>set ks_alias = "server"
set ks_valid = "365"
set ks_pwd   = "Sum.Password"
set jks_fn   = "${ks_alias}.jks"
set cert_fn  = "${ks_alias}.cert"
set sdname   = "CN=${ks_alias} (Common Name), OU=Organizational Unit, O=Organization, L=Locality-City, ST=State, C=CountryCode"

rm -f $jks_fn $cert_fn

keytool -genkey      -alias "$ks_alias" -dname "$sdname" -validity $ks_valid -keypass "$ks_pwd" -storepass "$ks_pwd" -keystore $jks_fn
keytool -export -rfc -alias "$ks_alias" -file $cert_fn                                          -storepass "$ks_pwd" -keystore $jks_fn
</code></pre>

<p>If configuring for mutual authentication, repeat the above process
with appropriate substitutions for the client-side certificate.</p>

<h2>Northbound API Server SSL Configuration</h2>

<p>To configure the Northbound API server, the necessary certificate
files must have been generated:</p>

<ul>
<li>Server public/private key store (e.g., "server.jks")</li>
<li>Client public key trust data (e.g., "client.cert") <strong>mutual authentication only</strong></li>
</ul>

<p>The following parameters (making appropriate substitutions for the
values) must be added to the floodlight configuration file (e.g.,
"runtime/config/floodlight.properties"):</p>

<pre><code>*module name*.SERVICES_SELECT=SSL
*module name*.SSL_SERVER_KS_PATH=server.jks
*module name*.SSL_SERVER_KS_PWD=Sum.Password
</code></pre>

<p>and, if configuring mutual authentication:</p>

<pre><code>*module name*.SSL_SERVER_TM_PATH=client.cert
</code></pre>

<p>Where <em>module name</em> is the Northbound API's module name (e.g.,
"net.floodlightcontroller.security.northboundapi.server.SENorthboundAPI").
If using other key store types, there are additional parameters to
specify those elements of the created SSL context: see the
documentation for the <a href="index.html?net/floodlightcontroller/northboundapi/server/NBServerSSLSupport.html" title="NBServerSSLSupport class">NBServerSSLSupport</a> class for details.</p>

<h2>Northbound API Java Actuator Client SSL Configuration</h2>

<p>To configure the Java actuator client (as of this writing, the Perl
client does not support SSL), the necessary certificate files must
have been generated:</p>

<ul>
<li>Server public key trust data (e.g., "server.cert")</li>
<li>Client public/private key store (e.g., "client.jks") <strong>mutual authentication only</strong></li>
</ul>

<p>The following parameters (making appropriate substitutions for the
values) must be added to the actuator's configuration file (e.g.,
"runtime/java/OFActuator.config"):</p>

<pre><code>SSLTrustPath=server.cert
</code></pre>

<p>and, if configuring mutual authentication:</p>

<pre><code>SSLIdentityPath=client.jks
SSLIdentityPwd=Sum.Password
</code></pre>

			
				<br>
				<br>
				<i>Last modified: Thursday, 10-Oct-2013 11:21 PDT</i>
				</body>
			
			