diff --git a/src/main/java/net/floodlightcontroller/linkdiscovery/internal/LinkDiscoveryManager.java b/src/main/java/net/floodlightcontroller/linkdiscovery/internal/LinkDiscoveryManager.java
index 2dbba0a..0876447 100644
--- a/src/main/java/net/floodlightcontroller/linkdiscovery/internal/LinkDiscoveryManager.java
+++ b/src/main/java/net/floodlightcontroller/linkdiscovery/internal/LinkDiscoveryManager.java
@@ -104,6 +104,7 @@ import org.openflow.protocol.OFPort;
 import org.openflow.protocol.OFType;
 import org.openflow.protocol.action.OFAction;
 import org.openflow.protocol.action.OFActionOutput;
+import org.openflow.protocol.factory.BasicFactory;
 import org.openflow.util.HexString;
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
@@ -127,7 +128,7 @@ import org.slf4j.LoggerFactory;
 public class LinkDiscoveryManager implements IOFMessageListener,
     IOFSwitchListener, IStorageSourceListener, ILinkDiscoveryService,
     IFloodlightModule, IInfoProvider {
-    protected static final Logger log = LoggerFactory.getLogger(LinkDiscoveryManager.class);
+    protected static Logger log = LoggerFactory.getLogger(LinkDiscoveryManager.class);
     protected static final INotificationManager notifier =
         NotificationManagerFactory.getNotificationManager(LinkDiscoveryManager.class);
 
@@ -377,7 +378,7 @@ public class LinkDiscoveryManager implements IOFMessageListener,
 
         // serialize and wrap in a packet out
         byte[] data = ethernet.serialize();
-        OFPacketOut po = (OFPacketOut) floodlightProvider.getOFMessageFactory()
+        OFPacketOut po = (OFPacketOut) getOFMessageFactory()
                                                          .getMessage(OFType.PACKET_OUT);
         po.setBufferId(OFPacketOut.BUFFER_ID_NONE);
         po.setInPort(OFPort.OFPP_NONE);
@@ -1108,6 +1109,11 @@ public class LinkDiscoveryManager implements IOFMessageListener,
         return actions;
     }
 
+    protected BasicFactory getOFMessageFactory ()
+    {
+    	return floodlightProvider.getOFMessageFactory ();
+    }
+
     /**
      * Send link discovery message out of a given switch port. The discovery
      * message may be a standard LLDP or a modified LLDP, where the dst mac
